<div class="reports-container">
  <h2>Raporty</h2>

  <div class="report-selection">
    <mat-form-field>
      <mat-label>Wybierz datę tygodnia</mat-label>
      <input matInput [matDatepicker]="weekPicker" [(ngModel)]="selectedDate" (ngModelChange)="generateWeeklyReport()">
      <mat-datepicker-toggle matSuffix [for]="weekPicker"></mat-datepicker-toggle>
      <mat-datepicker #weekPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Wybierz miesiąc</mat-label>
      <mat-select [(ngModel)]="selectedMonth" (selectionChange)="generateMonthlyReport()">
        <mat-option *ngFor="let month of months" [value]="month">{{ monthNames[month - 1] }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Wybierz kwartał</mat-label>
      <mat-select [(ngModel)]="selectedQuarter" (selectionChange)="generateQuarterlyReport()">
        <mat-option *ngFor="let quarter of quarters" [value]="quarter">{{ quarter }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Wybierz rok</mat-label>
      <mat-select [(ngModel)]="selectedYear" (selectionChange)="generateReports()">
        <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="report-sections">
    <div class="report-section" *ngIf="weeklyReport">
      <h3>Raport tygodniowy</h3>
      <div class="report-details">
        <p><strong>Przychód:</strong> <span class="income-amount">{{ weeklyReport.totalIncome | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Wydatki:</strong> <span class="expense-amount">{{ weeklyReport.totalExpense | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Bilans:</strong> <span [ngClass]="{'positive-balance': weeklyReport.balance >= 0, 'negative-balance': weeklyReport.balance < 0}">{{ weeklyReport.balance | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
      <div class="forecast-details" *ngIf="weeklyForecast">
        <h4>Prognoza tygodniowa</h4>
        <p><strong>Średnie wydatki:</strong> <span class="expense-amount">{{ weeklyForecast.average | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
    </div>

    <div class="report-section" *ngIf="monthlyReport">
      <h3>Raport miesięczny</h3>
      <div class="report-details">
        <p><strong>Przychód:</strong> <span class="income-amount">{{ monthlyReport.totalIncome | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Wydatki:</strong> <span class="expense-amount">{{ monthlyReport.totalExpense | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Bilans:</strong> <span [ngClass]="{'positive-balance': monthlyReport.balance >= 0, 'negative-balance': monthlyReport.balance < 0}">{{ monthlyReport.balance | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
      <div class="forecast-details" *ngIf="monthlyForecast">
        <h4>Prognoza miesięczna</h4>
        <p><strong>Średnie wydatki:</strong> <span class="expense-amount">{{ monthlyForecast.average | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
    </div>

    <div class="report-section" *ngIf="quarterlyReport">
      <h3>Raport kwartalny</h3>
      <div class="report-details">
        <p><strong>Przychód:</strong> <span class="income-amount">{{ quarterlyReport.totalIncome | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Wydatki:</strong> <span class="expense-amount">{{ quarterlyReport.totalExpense | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Bilans:</strong> <span [ngClass]="{'positive-balance': quarterlyReport.balance >= 0, 'negative-balance': quarterlyReport.balance < 0}">{{ quarterlyReport.balance | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
      <div class="forecast-details" *ngIf="quarterlyForecast">
        <h4>Prognoza kwartalna</h4>
        <p><strong>Średnie wydatki:</strong> <span class="expense-amount">{{ quarterlyForecast.average | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
    </div>

    <div class="report-section" *ngIf="yearlyReport">
      <h3>Raport roczny</h3>
      <div class="report-details">
        <p><strong>Przychód:</strong> <span class="income-amount">{{ yearlyReport.totalIncome | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Wydatki:</strong> <span class="expense-amount">{{ yearlyReport.totalExpense | currency:'PLN':'symbol':'1.2-2' }}</span></p>
        <p><strong>Bilans:</strong> <span [ngClass]="{'positive-balance': yearlyReport.balance >= 0, 'negative-balance': yearlyReport.balance < 0}">{{ yearlyReport.balance | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
      <div class="forecast-details" *ngIf="yearlyForecast">
        <h4>Prognoza roczna</h4>
        <p><strong>Średnie wydatki:</strong> <span class="expense-amount">{{ yearlyForecast.average | currency:'PLN':'symbol':'1.2-2' }}</span></p>
      </div>
    </div>
  </div>
</div>
